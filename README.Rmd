---
title: "長庚大學 大數據分析方法 作業五"
output: github_document
---

## 作業說明 （繳交時請直接刪除這個章節）

作業目的：延續作業四，練習讀入檔案，並做基本的探索式資料分析

依下列指示，完成探索式資料分析作業：

- 下載並讀入[105各村里教育程度資料](http://data.moi.gov.tw/MoiOD/Data/DataContent.aspx?oid=1F69C3BD-C367-4216-8969-14FDC609B4B0) `5pt`

- 下載並讀入[10512村里戶數、單一年齡人口](http://data.moi.gov.tw/MoiOD/Data/DataContent.aspx?oid=EEC2F7DB-CD5B-4968-AB40-9BD17B86A8C2) `5pt` 

- 分析議題1：各縣市各有多少個村里`10pt`？用村里數由大到小排序`5pt` ，討論結果`5pt` 。（group_by, summarise, n, arrange）

- 分析議題2：各縣市各村里的平均人口數是多少（平均每個村里有多少人）`10pt`？用平均人口數由大到小排序`5pt` ，討論結果`5pt` 。（group_by, summarise, mean, arrange）

- 分析議題3：哪個**縣市**的博班畢業（不分性別）人口最多`10pt`？用博班畢業人口數由大到小排序`5pt` ，討論結果`5pt` 。（group_by, summarise, sum, mutate, arrange）

- 分析議題4：各**縣市**碩畢男女比例的差異
    - 利用**村里**資料加總來計算各**縣市**男女人口與碩畢男女人數資料 （group_by, summarise）`10pt`
    - 使用上述總合後的資料，基於**縣市**欄位，結合教育程度與人口兩張表格 （inner_join） `10pt`
    - 分別計算各縣市男女碩畢比例，依結果**討論**各縣市男女碩畢比例是否有差異，如有幾個縣市男生碩畢比例大於女生，是否有和地區有關等 `10pt`


## 讀入教育程度資料與人口數資料
```{r}
#這是R Code Chunk
library(readr)
data1 <-read_csv("~/Desktop/HW5-YeungSaoIan/opendata105Y020.csv")
data2 <-read_csv("~/Desktop/HW5-YeungSaoIan/opendata10512M030.csv")
library(dplyr)
#結合教育程度與人口兩張表格
mix<-inner_join(data1,data2,by=c("site_id","village"="village"))
```

## 各縣市村里數
```{r}
#這是R Code Chunk
 villagenumanalyze = summarise(group_by(mix,site_id), villagenum = n())
knitr::kable(
head(villagenumanalyze[order(villagenumanalyze$villagenum,decreasing = T),])
)
```

解釋解釋解釋
討論討論討論討論

## 各縣市每個村里平均有多少人
```{r}
#這是R Code Chunk
#villagepopmeananalyze = summarise(group_by(villagenumanalyze,site_id),villagenum = n(), villagepopmean = as.numeric(villagenum)/as.numeric(data2$people_total))

villagepopmeananalyze = summarise(group_by(mix,site_id),villagenum = n(), villagepopnum = sum(as.numeric(people_total)), villagepopmean = villagepopnum/villagenum)
knitr::kable(
head(villagepopmeananalyze[order(villagepopmeananalyze$villagepopmean,decreasing = T),])
)
```

解釋解釋解釋
討論討論討論討論


## 各縣市的博班畢業人口
```{r}
#這是R Code Chunk
villagephdanalyze = summarise(group_by(mix,site_id),villagenum = n(), villagephdnum = sum(as.numeric(edu_doctor_graduated_m) +as.numeric(edu_doctor_graduated_f)) )  
knitr::kable(
head(villagephdanalyze[order(villagephdanalyze$villagephdnum,decreasing = T),])
)
```

解釋解釋解釋
討論討論討論討論


## 各縣市碩畢男女比例的差異
```{r}
#這是R Code Chunk
villagemasteranalyze = summarise(group_by(mix,site_id),villagenum = n(), villagemalemasterrate =sum(as.numeric(edu_master_graduated_m))/sum(as.numeric(people_total_m)), villagefemalemasterrate =sum(as.numeric(edu_master_graduated_f))/sum(as.numeric(people_total_f)), villagemasterrate = villagemalemasterrate + villagefemalemasterrate)  

knitr::kable(
  head(villagemasteranalyze[order(villagemasteranalyze$villagemasterrate,decreasing = T),])
)

#結合教育程度與人口兩張表格
mix<-inner_join(data1,data2,by=c("site_id","village"="village"))
```

解釋解釋解釋
討論討論討論討論